<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="baidu-site-verification" content="L6Lm9d5Crl"/>
  
  
  
  
  <title>计算机编码 | My Story</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="计算机编码：">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机编码">
<meta property="og:url" content="https://jingweiz300.github.io/2018/05/13/计算机编码/index.html">
<meta property="og:site_name" content="My Story">
<meta property="og:description" content="计算机编码：">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://xuelangzf-github.qiniudn.com/20161228_encode_decode_1.png">
<meta property="og:image" content="http://xuelangzf-github.qiniudn.com/20161228_encode_decode_2.png">
<meta property="og:image" content="http://xuelangzf-github.qiniudn.com/20161228_encode_decode_3.png">
<meta property="og:updated_time" content="2018-06-13T14:19:32.019Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="计算机编码">
<meta name="twitter:description" content="计算机编码：">
<meta name="twitter:image" content="http://xuelangzf-github.qiniudn.com/20161228_encode_decode_1.png">
  
    <link rel="alternative" href="/atom.xml" title="My Story" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/avatar.png" class="js-avatar">
            
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">JingWei Zhou</a></h1>
        </hgroup>
        
        <p class="header-subtitle">虽不能至，然心向往之~~</p>
        
        
            <form>
                <input type="text" class="st-default-search-input search" id="local-search-input" placeholder="搜索一下" autocomplete="off">
            </form>
            <div id="local-search-result"></div>
        
        
            <script type="text/javascript">
                (function() {
                    'use strict';
                    function getMatchData(keyword, data) {
                        var matchData = [];
                        for(var i =0;i<data.length;i++){
                            if(data[i].title.toLowerCase().indexOf(keyword)>=0) 
                                matchData.push(data[i])
                        }
                        return matchData;
                    }
                    var $input = $('#local-search-input');
                    var $resultContent = $('#local-search-result');
                    $input.keyup(function(){
                        $.ajax({
                            url: '/search.json',
                            dataType: "json",
                            success: function( json ) {
                                var str='<ul class=\"search-result-list\">';                
                                var keyword = $input.val().trim().toLowerCase();
                                $resultContent.innerHTML = "";
                                if ($input.val().trim().length <= 0) {
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                }
                                var results = getMatchData(keyword, json);
                                if(results.length === 0){
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                } 
                                for(var i =0; i<results.length; i++){
                                    str += "<li><a href='"+ results[i].url +"' class='search-result-title'>"+ results[i].title +"</a></li>";
                                }
                                str += "</ul>";
                                $resultContent.empty();
                                $resultContent.append(str);
                                $('#switch-area').hide();
                            }
                        });
                    });
                })();
            </script>
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        
        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a  href="/archives/">ALL</a></li>
                        
                            <li><a  href="/categories/operation/">Operation</a></li>
                        
                            <li><a  href="/categories/python/">Python</a></li>
                        
                            <li><a  href="/categories/linux/">Linux</a></li>
                        
                            <li><a  href="/categories/mlearn/">MLearn</a></li>
                        
                            <li><a  href="/categories/feeling/">Feeling</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github"  target="_blank" href="/xxxxx" title="github">github</a>
                            
                                <a class="fl weibo"  target="_blank" href="https://weibo.com/u/2369842910/home?wvr=5" title="weibo">weibo</a>
                            
                                <a class="fl rss"  target="_blank" href="/atom.xml" title="rss">rss</a>
                            
                        </ul>
                    </nav>
                </section>
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Matplotlib/" style="font-size: 10px;">Matplotlib</a> <a href="/tags/anaconda/" style="font-size: 10px;">anaconda</a> <a href="/tags/bin目录/" style="font-size: 10px;">bin目录</a> <a href="/tags/centos7/" style="font-size: 10px;">centos7</a> <a href="/tags/fabric/" style="font-size: 12.5px;">fabric</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/numpy/" style="font-size: 12.5px;">numpy</a> <a href="/tags/pandas/" style="font-size: 12.5px;">pandas</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/threading/" style="font-size: 10px;">threading</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/xlwt/" style="font-size: 10px;">xlwt</a> <a href="/tags/zabbix/" style="font-size: 17.5px;">zabbix</a> <a href="/tags/修改主机名/" style="font-size: 10px;">修改主机名</a> <a href="/tags/免密登录/" style="font-size: 10px;">免密登录</a> <a href="/tags/常用命令/" style="font-size: 15px;">常用命令</a> <a href="/tags/微信/" style="font-size: 10px;">微信</a> <a href="/tags/时间同步/" style="font-size: 10px;">时间同步</a> <a href="/tags/查找命令/" style="font-size: 10px;">查找命令</a> <a href="/tags/模块使用/" style="font-size: 20px;">模块使用</a> <a href="/tags/系统日志/" style="font-size: 10px;">系统日志</a> <a href="/tags/网络/" style="font-size: 12.5px;">网络</a> <a href="/tags/虚拟机/" style="font-size: 12.5px;">虚拟机</a> <a href="/tags/转义字符/" style="font-size: 10px;">转义字符</a> <a href="/tags/运维/" style="font-size: 10px;">运维</a>
                    </div>
                </section>
                
                
                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">爱篮球、爱电脑、爱编程</div>
                </section>
                
            </div>
        </div>
    </header>
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">JingWei Zhou</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/avatar.png" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">JingWei Zhou</a></h1>
            </hgroup>
            
            <p class="header-subtitle">虽不能至，然心向往之~~</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/archives/">ALL</a></li>
                
                    <li><a href="/categories/operation/">Operation</a></li>
                
                    <li><a href="/categories/python/">Python</a></li>
                
                    <li><a href="/categories/linux/">Linux</a></li>
                
                    <li><a href="/categories/mlearn/">MLearn</a></li>
                
                    <li><a href="/categories/feeling/">Feeling</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="/xxxxx" title="github">github</a>
                    
                        <a class="weibo" target="_blank" href="https://weibo.com/u/2369842910/home?wvr=5" title="weibo">weibo</a>
                    
                        <a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-计算机编码" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2018/05/13/计算机编码/" class="article-date">
      <time datetime="2018-05-13T12:48:28.000Z" itemprop="datePublished">2018-05-13</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      计算机编码
    </h1>
  


      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/feeling/">feeling</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><strong> 计算机编码：</strong> <excerpt in="" index="" |="" 首页摘要=""></excerpt></p>
<a id="more"></a>
<the rest="" of="" contents="" |="" 余下全文="">



<p>本文转载：<a href="http://python.jobbole.com/87145/" target="_blank" rel="noopener">http://python.jobbole.com/87145/</a></p>
<p>在人机交互之字符编码 一文中对字符编码进行了详细的讨论，并通过一些简单的小程序验证了我们对于字符编码的认识。但仅了解这篇文章的内容，并不能帮我们在日常编程中躲过一些字符编码相关的坑，Stackoverflow 上就有大量编码相关的问题，比如 <a href="http://stackoverflow.com/questions/9942594/unicodeencodeerror-ascii-codec-cant-encode-character-u-xa0-in-position-20" target="_blank" rel="noopener">1</a>，<a href="http://python.jobbole.com/87145/Convert%20Unicode%20to%20ASCII%20without%20errors" target="_blank" rel="noopener">2</a>，<a href="http://stackoverflow.com/questions/2688020/how-to-print-chinese-word-in-my-code-using-python" target="_blank" rel="noopener">3</a>。</p>
<p><img src="http://xuelangzf-github.qiniudn.com/20161228_encode_decode_1.png" alt="图1. 错误的编解码"></p>
<p>本文首先尝试对编码、解码进行一个<strong>宏观、直观</strong>的解读，然后详细来解释 python2 中的str和unicode，并对常见的UnicodeEncodeError 和 UnicodeDecodeError 异常进行剖析。</p>
<h1 id="如何理解编、解码？"><a href="#如何理解编、解码？" class="headerlink" title="如何理解编、解码？"></a>如何理解编、解码？</h1><p>如何去理解编码、解码？举个例子，Alice同学刚加入了机器学习这门课，想给同班的Bob同学打个招呼。但是作为人，Alice不能通过意念和Bob交流，必须通过某种方式，比如手语、声音、文字等来表达自己的想法。如果Alice选择用文字，那么他可能会写下这么一段文字：<code>My name is： boot …… 来学机器学习喽</code>，写文字这个过程其实就是<strong>编码</strong>，经过编码后的文字才能给Bob看。Bob收到Alice的文字后，就会用自己对文字的认知来解读Alice传达的含义，这个过程其实就是<strong>解码</strong>。当然，如果Bob不懂中文，那么就无法理解Alice的最后一句了，如果Bob不识字，就完全不知道Alice想表达什么了。</p>
<p>上面的例子只是为了方便我们理解编码、解码这个抽象的概念，现在来看看对于计算机程序来说，如何去理解字符的编码、解码过程。我们知道绝大多数程序都是读取数据，做一些操作，然后输出数据。比如当我们打开一个文本文件时，就会从硬盘读取文件中的数据，接着我们输入了新的数据，点击保存后，文本程序会将更新后的内容输出到硬盘。程序读取数据就相当于Bob读文字，必须进行一个解码的过程，解码后的数据才能让我们进行各种操作。同理，保存到硬盘时，也需要对数据进行编码。</p>
<p>下图方框 A 代表一个输出数据的程序，方框 B 代表一个读取数据的程序。当然这里的程序只是一个概念，表示一个处理数据的逻辑单元，可以是一个进程、一个函数甚至一个语句等。A 和 B 也可以是同一个程序，先解码外部获取的数据，内部操作后，再进行某种编码。</p>
<p><img src="http://xuelangzf-github.qiniudn.com/20161228_encode_decode_2.png" alt="图2. 编码、解码的过程"></p>
<p>值得注意的是，有的编码方案不一定能表示某些信息，这时编码就会失败，比如 ASCII 就不能用来表示中文。当然，如果以错误的方式去解读某段内容，解码也会失败，比如用 ASCII 来解读包含 UTF-8的信息。至于什么是 ASCII，UTF-8等，在<a href="http://selfboot.cn/2014/08/28/character_encoding/" target="_blank" rel="noopener">人机交互之字符编码</a> 中有详细的说明，这里不再赘述。下面结合具体的例子，来看看编码、解码的细节问题。</p>
<h1 id="python2-x-中的字符串"><a href="#python2-x-中的字符串" class="headerlink" title="python2.x 中的字符串"></a>python2.x 中的字符串</h1><p>在程序设计中，字符串一般是指一连串的<a href="https://docs.python.org/2/howto/unicode.html#definitions" target="_blank" rel="noopener">字符</a>，比如<code>hello world!</code>、<code>你好</code>或者<code>もしもし</code>（日语）等等。各种语言对于字符串的支持各不相同，Python 2 中字符串的设计颇不合理，导致新手经常会出现各种问题，类似下面的提示信息相信很多人都遇到过（<code>UnicodeEncodeError</code> 或者 <code>UnicodeDecodeError</code>）：</p>
<p>Python</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">UnicodeEncodeError: <span class="string">'ascii'</span> codec can<span class="string">'t encode characters in position 0-1: ordinal not in range(128)</span></span><br></pre></td></tr></table></figure>
<p>下面我们一起来解决这个疑难杂症。首先需要搞清楚python中的两个类型：<code>&lt;type &#39;str&#39;&gt;</code>和 <code>&lt;type &#39;unicode&#39;&gt;</code>，<a href="https://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange" target="_blank" rel="noopener">文档</a>中关于这两个类型的说明其实挺含糊的：</p>
<blockquote>
<p>There are seven sequence types: strings, Unicode strings, lists, …</p>
<p>String literals are written in single or double quotes: ‘xyzzy’, “frobozz”. Unicode strings are much like strings, but are specified in the syntax using a preceding ‘u’ character: u’abc’, u”def”.</p>
</blockquote>
<p>上面并没有给出什么有用的信息，不过好在<a href="https://www.azavea.com/blog/2014/03/24/solving-unicode-problems-in-python-2-7/" target="_blank" rel="noopener">这篇文章</a>讲的特别好，简单来说：</p>
<ul>
<li>str：是<code>字节串（container for bytes）</code>，由 Unicode 经过编码(encode)后的字节组成的。</li>
<li>unicode：真正意义上的<code>字符串</code>，其中的每个字符用 Unicode 中对应的 <a href="https://en.wikipedia.org/wiki/Code_point" target="_blank" rel="noopener">Code Point</a> 表示。翻译成<strong>人话</strong>就是，unicode 有点类似于前面 Alice 打招呼传递的想法，而 str 则是写下来的文字（或者是说出来的声音，甚至可以是手语）。我们可以用 GBK，UTF-8 等编码方案将 Unicode 类型转换为 str 类型，类似于用语言、文字或者手语来表达想法。</li>
</ul>
<h2 id="repr-与终端交互"><a href="#repr-与终端交互" class="headerlink" title="repr 与终端交互"></a>repr 与终端交互</h2><p>  为了彻底理解字符编码、解码，下面要用 python 交互界面进行一些小实验来加深我们的理解（下面所有的交互代码均在 Linux 平台下）。在这之前，我们先来看下面交互代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>demo = <span class="string">'Test 试试'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>demo</span><br><span class="line"><span class="string">'Test \xe8\xaf\x95\xe8\xaf\x95'</span></span><br></pre></td></tr></table></figure>
<p>当我们只输入标识符 demo 时，终端返回了 demo 的内容。这里返回的内容是怎么得到呢？答案是通过 <a href="https://docs.python.org/2/library/functions.html#repr" target="_blank" rel="noopener">repr() 函数</a> 获得。文档中对于 repr 函数解释如下：</p>
<p>  > Return a string containing a printable representation of an object.</p>
<p>  所以，我们可以在源文件中用下面的代码，来获取和上面终端一样的输出。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line">demo = <span class="string">'Test 试试'</span></span><br><span class="line"><span class="keyword">print</span> repr(demo)</span><br><span class="line"><span class="comment"># 'Test \xe8\xaf\x95\xe8\xaf\x95'</span></span><br></pre></td></tr></table></figure>
<p>对于字符串来说，<code>repr()</code> 的返回值很好地说明了其在python内部的表示方式。通过 repr 的返回值，我们可以真切体会到前面提到的两点：</p>
<ul>
<li><p><strong>str：实际上是字节串</strong></p>
</li>
<li><p>unicode：真正意义上的字符串</p>
<p>下面分别来看看这两个类型。</p>
<p>​</p>
<h2 id="unicode-类型"><a href="#unicode-类型" class="headerlink" title="unicode 类型"></a>unicode 类型</h2><p><strong>unicode 是真正意义上的字符串</strong>，为了理解这句话，先看下面的一段代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<blockquote>
<p>unicode_str = u’Welcome to 广州’ # ‘’前面的 u 表示这是一个 unicode 字符串</p>
<blockquote>
<p>unicode_str, type(unicode_str) # repr(unicode_str)<br>   Welcome to \u5e7f\u5dde’, <type 'unicode'="">)<br>1<br>2<br>3<br>unicode_str = u’Welcome to 广州’ # ‘’前面的 u 表示这是一个 unicode 字符串<br>unicode_str, type(unicode_str) # repr(unicode_str)<br>   Welcome to \u5e7f\u5dde’, <type 'unicode'="">)</type></type></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p>repr 返回的 <code>Welcome to \u5e7f\u5dde</code> 说明了unicode_str存储的内容，其中两个<code>\u</code>后面的数字分别对应了<code>广、州</code>在unicode中的code point：</p>
</li>
<li><p><code>5e7f</code> 对应<code>广</code>字；</p>
</li>
<li><p>5dde</p>
</li>
</ul>
<p>  对应州字；英文字母也有对应的code point，它的值等于ASCII值，不过repr并没有直接输出。我们可以在</p>
<p>  站长工具中查看所有字符对应的code point。也可以用 python 的内置函数ord查看字符的 code point，如下所示（调用了 format 将code point转换为十六进制）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;:04x&#125;'</span>.format(ord(<span class="string">u'广'</span>))</span><br><span class="line"><span class="string">'5e7f'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;:04x&#125;'</span>.format(ord(<span class="string">u'W'</span>))</span><br><span class="line"><span class="string">'0057'</span></span><br></pre></td></tr></table></figure>
<p>  总结一下，我们可以将 <code>&amp;amp;lt;type &#39;unicode&#39;&amp;amp;gt;</code> 看作是<strong>一系列字符组成的数组</strong>，数组的每一项是一个code point，用来表示相应位置的字符。所以对于 unicode 来说，其长度等于它包含的字符（<code>a</code> 和 <code>广</code> 都是一个字符）的数目。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(unicode_str)</span><br><span class="line"><span class="number">13</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>unicode_str[<span class="number">0</span>], unicode_str[<span class="number">12</span>], unicode_str[<span class="number">-1</span>]</span><br><span class="line">(<span class="string">u'W'</span>, <span class="string">u'\u5dde'</span>, <span class="string">u'\u5dde'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="str-类型"><a href="#str-类型" class="headerlink" title="str 类型"></a>str 类型</h2><p>  <strong>str 是字节串（container for bytes）</strong>，为了理解这句话，先来看下面的一段代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str_str = <span class="string">'Welcome to 广州'</span> <span class="comment"># 这是一个 str</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str_str, type(str_str)</span><br><span class="line">(<span class="string">'Welcome to \xe5\xb9\xbf\xe5\xb7\x9e'</span>, &lt;type <span class="string">'str'</span>&gt;)</span><br></pre></td></tr></table></figure>
<p>  python中 <code>\xhh</code>（h为16进制数字）表示一个字节，输出中的<code>\xe5\xb9\xbf\xe5\xb7\x9e</code> 就是所谓的字节串，它对应了<code>广州</code>。实际上 str_str 中的英文字母也是保存为字节串的，不过 repr 并没有以 <code>\x</code> 的形式返回。为了验证上面输出内容确实是<strong>字节串</strong>，我们用python提供的 <a href="https://docs.python.org/2.7/library/functions.html#bytearray" target="_blank" rel="noopener">bytearray 函数</a>将相同内容的 unicode字符串用 UTF-8 编码为字节数组，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>unicode_str = <span class="string">u'Welcome to 广州'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bytearray(unicode_str, <span class="string">'UTF-8'</span>)</span><br><span class="line">bytearray(<span class="string">b'Welcome to \xe5\xb9\xbf\xe5\xb7\x9e'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(bytearray(unicode_str, <span class="string">'UTF-8'</span>)) </span><br><span class="line"><span class="comment"># 字节数组，每一项为一个字节；</span></span><br><span class="line">[<span class="number">87</span>, <span class="number">101</span>, <span class="number">108</span>, <span class="number">99</span>, <span class="number">111</span>, <span class="number">109</span>, <span class="number">101</span>, <span class="number">32</span>, <span class="number">116</span>, <span class="number">111</span>, <span class="number">32</span>, <span class="number">229</span>, <span class="number">185</span>, <span class="number">191</span>, <span class="number">229</span>, <span class="number">183</span>, <span class="number">158</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">r"\x"</span> + <span class="string">r"\x"</span>.join([<span class="string">"%02x"</span> % c <span class="keyword">for</span> c <span class="keyword">in</span> list(bytearray(unicode_str, <span class="string">'UTF-8'</span>))])</span><br><span class="line"><span class="comment"># 转换为 \xhh 的形式</span></span><br><span class="line">\x57\x65\x6c\x63\x6f\x6d\x65\x20\x74\x6f\x20\xe5\xb9\xbf\xe5\xb7\x9e</span><br></pre></td></tr></table></figure>
<p>可见，上面的 str<em>str 是 unicode_str 经过 UTF-8 编码 后的字节串。这里透漏了一个十分重要的信息，**str类型隐含有某种编码方式**，正是这种隐式编码（_implicit encoding</em>）的存在导致了许多问题的出现（后面详细说明）。值得注意的是，str类型字节串的隐式编码不一定都是’UTF-8’，前面示例程序都是在 OS X 平台下的终端，所以隐式编码是 UTF-8。对于 Windows 而言，如果语言设置为简体中文，那么交互界面输出如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Win 平台下，系统语言为简体中文</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str_str = <span class="string">'Welcome to 广州'</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str_str, type(str_str)</span><br><span class="line">(<span class="string">'Welcome to \xb9\xe3\xd6\xdd'</span>, &lt;type <span class="string">'str'</span>&gt;)</span><br></pre></td></tr></table></figure>
<p>这里str_str的隐式编码是<strong>cp936</strong>，可以用 <code>bytearray(unicode_str, &#39;cp936&#39;)</code> 来验证这点。终端下，str类型的隐式编码由系统 locale 决定，可以采用下面方式查看：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Unix or Linux</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> locale</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>locale.getdefaultlocale() </span><br><span class="line">(<span class="string">'zh_CN'</span>, <span class="string">'UTF-8'</span>)</span><br><span class="line">...</span><br><span class="line"><span class="comment"># 简体中文 Windows</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>locale.getdefaultlocale() </span><br><span class="line">(<span class="string">'zh_CN'</span>, <span class="string">'cp936'</span>)</span><br></pre></td></tr></table></figure>
<p>总结一下，我们可以将 <code>&amp;amp;lt;type &#39;str&#39;&amp;amp;gt;</code> 看作是<strong>unicode字符串经过某种编码后的字节组成的数组</strong>。数组的每一项是一个字节，用 <code>\xhh</code> 来表示。所以对于 str 字符串来说，其长度等于编码后字节的长度。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(str_str)</span><br><span class="line"><span class="number">17</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str_str[<span class="number">0</span>], str_str[<span class="number">-1</span>]</span><br><span class="line">(<span class="string">'W'</span>, <span class="string">'\x9e'</span>) <span class="comment"># 实际上是('\x57', '\x9e')</span></span><br></pre></td></tr></table></figure>
<h1 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h1><p>  Python 2.x 中为上面两种类型的字符串都提供了 <a href="https://docs.python.org/2/library/stdtypes.html#string-methods" target="_blank" rel="noopener">encode 和 decode</a> 方法，原型如下：</p>
<p>  > str.decode([encoding[, errors]]) &gt; str.encode([encoding[, errors]])</p>
<p>  利用上面的两个函数，可以实现 str 和 unicode 类型之间的相互转换，如下图所示：</p>
<p>  <img src="http://xuelangzf-github.qiniudn.com/20161228_encode_decode_3.png" alt="图3. 类型间相互转换"></p>
<p>  上图中绿色线段标示的即为我们常用的转换方法，红色标示的转换在 python 2.x 中是合法的，不过没有什么意义，通常会抛出错误（可以参见 <a href="http://stackoverflow.com/questions/447107/what-is-the-difference-between-encode-decode" target="_blank" rel="noopener">What is the difference between encode/decode?</a>）。下面是两种类型之间的转换示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># decode： &lt;type 'str'&gt; 到 &lt;type 'unicode'&gt;的转换</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>enc = str_str.decode(<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>enc, type(enc)</span><br><span class="line">(<span class="string">u'Welcome to \u5e7f\u5dde'</span>, &lt;type <span class="string">'unicode'</span>&gt;)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># encode： &lt;type 'unicode'&gt; 到 &lt;type 'str'&gt; 的转换</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dec = unicode_str.encode(<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dec, type(dec)</span><br><span class="line">(<span class="string">'Welcome to \xe5\xb9\xbf\xe5\xb7\x9e'</span>, &lt;type <span class="string">'str'</span>&gt;)</span><br></pre></td></tr></table></figure>
<p>  上面代码中通过encode将unicode类型<strong>编码</strong>为str类型，通过 decode 将str类型<strong>解码</strong>为unicode类型。当然，编码、解码的过程并不总是一帆风顺的，通常会出现各种错误。</p>
<h2 id="编、解码错误"><a href="#编、解码错误" class="headerlink" title="编、解码错误"></a>编、解码错误</h2><p>  Python 中经常会遇到 UnicodeEncodeError 和 UnicodeDecodeError，怎么产生的呢？ 如下代码所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u'Hello 广州'</span>.encode(<span class="string">'ascii'</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line"> File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">UnicodeEncodeError: <span class="string">'ascii'</span> codec can<span class="string">'t encode characters in position 6-7: ordinal not in range(128)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&gt;&gt;&gt; '</span>Hello 广州<span class="string">'.decode('</span>ascii<span class="string">')</span></span><br><span class="line"><span class="string">Traceback (most recent call last):</span></span><br><span class="line"><span class="string"> File "&lt;stdin&gt;", line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="string">UnicodeDecodeError: '</span>ascii<span class="string">' codec can'</span>t decode byte <span class="number">0xe5</span> <span class="keyword">in</span> position <span class="number">6</span>: ordinal <span class="keyword">not</span> <span class="keyword">in</span> range(<span class="number">128</span>)</span><br></pre></td></tr></table></figure>
<p>  当我们用 ascii 去编码带有中文的unicode字符串时，发生了UnicodeEncodeError，当我们用 ascii 去解码有中文的str字节串时，发生了UnicodeDecodeError。我们知道，ascii 只包含 127 个字符，根本无法表示中文。所以，让 ascii 来编码、解码中文，就超出了其能力范围。这就像你对一个不懂中文的老外说中文，他根本没法听懂。简单来说，<strong>所有的编码、解码错误都是由于所选的编码、解码方式无法表示某些字符造成的</strong>。</p>
<p>  有时候我们就是想用 ascii 去编码一段夹杂中文的str字节串，并不希望抛出异常。那么可以通过 errors 参数来指定当无法编码某个字符时的处理方式，常用的处理方式有 “strict”，”ignore”和”replace”。改动后的程序如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u'Hello 广州'</span>.encode(<span class="string">'ascii'</span>, <span class="string">'replace'</span>)</span><br><span class="line"><span class="string">'Hello ??'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u'Hello 广州'</span>.encode(<span class="string">'ascii'</span>, <span class="string">'ignore'</span>)</span><br><span class="line"><span class="string">'Hello</span></span><br></pre></td></tr></table></figure>
<h2 id="隐藏的解码"><a href="#隐藏的解码" class="headerlink" title="隐藏的解码"></a>隐藏的解码</h2><p>  str和unicode类型都可以用来表示字符串，为了方便它们之间进行操作，python并不要求在操作之前统一类型，所以下面的代码是合法的，并且能得到正确的输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>new_str = <span class="string">u'Welcome to '</span> + <span class="string">'GuangZhou'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>new_str, type(new_str)</span><br><span class="line">(<span class="string">u'Welcome to GuangZhou'</span>, &lt;type <span class="string">'unicode'</span>&gt;)</span><br></pre></td></tr></table></figure>
<p>  因为str类型是隐含有某种编码方式的字节码，所以python内部将其<strong>解码</strong>为unicode后，再和unicode类型进行 <code>+ 操作</code>，最后返回的结果也是unicode类型。</p>
<p>  第2步的解码过程是在幕后悄悄发生的，<strong>默认采用ascii来进行解码</strong>，可以通过 <code>sys.getdefaultencoding()</code> 来获取默认编码方式。Python 之所以采用 ascii，是因为 ascii 是最早的编码方式，是许多编码方式的子集。</p>
<p>  不过正是这个不可见的解码过程，有时候会导致出乎意料的解码错误，考虑下面的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u'Welcome to'</span> + <span class="string">'广州'</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line"> File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">UnicodeDecodeError: <span class="string">'ascii'</span> codec can<span class="string">'t decode byte 0xe5 in position 0: ordinal not in range(128)</span></span><br></pre></td></tr></table></figure>
<p>  上面在字符串的+操作时，python 偷偷对’广州’用 ascii 做解码操作，所以抛出了UnicodeDecodeError异常。其实上面操作等同于 <code>u&#39;Welcome to&#39; + &#39;广州&#39;.decode(&#39;ascii&#39;)</code> ，你会发现这句代码抛出的异常和上面的一模一样。</p>
<h2 id="隐藏的编码"><a href="#隐藏的编码" class="headerlink" title="隐藏的编码"></a>隐藏的编码</h2><p>  Python 不只偷偷地用 ascii 来解码str类型的字节串，有时还会偷偷用ascii来编码unicode类型。如果函数或类等对象接收的是 str 类型的字符串，但传进去的是unicode，python2 就会使用 ascii 将其编码成str类型再做运算。</p>
<p>  以raw_input为例，我们可以给 <a href="https://docs.python.org/2/library/functions.html#raw_input" target="_blank" rel="noopener">raw_input</a> 函数提供 prompt 参数，作为输入提示内容。这里如果 prompt 是 unicode 类型，python会先用ascii对其进行编码，所以下面代码会抛出UnicodeEncodeError异常：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = raw_input(<span class="string">u'请输入内容: '</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line"> File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">UnicodeEncodeError: <span class="string">'ascii'</span> codec can<span class="string">'t encode characters in position 0-4: ordinal not in range(128)</span></span><br></pre></td></tr></table></figure>
<p>  上面操作完全等同于 <code>a = raw_input(u&#39;请输入内容: &#39;.encode(&#39;ascii&#39;))</code>，你会发现它们抛出的异常完全一样。此外，如果尝试将unicode字符串重定向输出到文本中，也可能会抛出UnicodeEncodeError异常。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> cat a.py</span><br><span class="line">demo = u'Test 试试'</span><br><span class="line">print demo</span><br><span class="line"><span class="meta">$</span> python a.py &gt; output</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line"> File "a.py", line 5, in &lt;module&gt;</span><br><span class="line"> print demo</span><br><span class="line">UnicodeEncodeError: 'ascii' codec can't encode characters in position 5-6: ordinal not in range(128)</span><br></pre></td></tr></table></figure>
<p>当然，如果直接在终端进行输出，则不会抛出异常。因为python会使用控制台的默认编码，而不是 ascii。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>总结下本文的内容：</p>
<ul>
<li>str可以看作是unicode字符串经过某种编码后的字节组成的数组</li>
<li>unicode是真正意义上的字符串</li>
<li>通过 encode 可以将unicode类型<strong>编码</strong>为str类型</li>
<li>通过 decode 可以将str类型<strong>解码</strong>为unicode类型</li>
<li>python 会隐式地进行编码、解码，默认采用 ascii</li>
<li>所有的编码、解码错误都是由于所选的编码、解码方式无法表示某些字符造成的</li>
</ul>
<p>如果你明白了上面每句话的含义，那么应该能解决大部分编、解码引起的问题了。当然，本篇文章其实并不能帮你完全避免python编码中的坑（坑太多）。还有许多问题在这里并没有说明：</p>
<ul>
<li>读取、写入文件时的编码问题：</li>
<li>数据库的读写</li>
<li>网络数据操作</li>
<li>源文件编码格式的指定</li>
</ul>
</the>
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a  href="/2018/05/13/计算机编码/">计算机编码</a></p>
        <p><span>文章作者:</span><a  href="/" title="访问 JingWei Zhou 的个人博客">JingWei Zhou</a></p>
        <p><span>发布时间:</span>2018年05月13日 - 20时48分</p>
        <p><span>最后更新:</span>2018年06月13日 - 22时19分</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2018/05/13/计算机编码/" title="计算机编码">https://jingweiz300.github.io/2018/05/13/计算机编码/</a>
            <span class="copy-path" data-clipboard-text="原文: https://jingweiz300.github.io/2018/05/13/计算机编码/　　作者: JingWei Zhou" title=""></span>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="中国大陆 (CC BY-NC-SA 3.0 CN)" target = "_blank">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



<nav id="article-nav">
  
    <a  href="/2018/06/13/zabbix监控MSSQL/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          zabbix监控MSSQL
        
      </div>
    </a>
  
  
    <a  href="/2018/05/10/多线程的一点思考/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">多线程的一点思考</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>


  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#如何理解编、解码？"><span class="toc-number">1.</span> <span class="toc-text">如何理解编、解码？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python2-x-中的字符串"><span class="toc-number">2.</span> <span class="toc-text">python2.x 中的字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#repr-与终端交互"><span class="toc-number">2.1.</span> <span class="toc-text">repr 与终端交互</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#unicode-类型"><span class="toc-number">2.2.</span> <span class="toc-text">unicode 类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#str-类型"><span class="toc-number">2.3.</span> <span class="toc-text">str 类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#类型转换"><span class="toc-number">3.</span> <span class="toc-text">类型转换</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#编、解码错误"><span class="toc-number">3.1.</span> <span class="toc-text">编、解码错误</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#隐藏的解码"><span class="toc-number">3.2.</span> <span class="toc-text">隐藏的解码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#隐藏的编码"><span class="toc-number">3.3.</span> <span class="toc-text">隐藏的编码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#总结"><span class="toc-number">4.</span> <span class="toc-text">总结</span></a></li></ol>
</div>
<style>
    .left-col .switch-btn {
        display: none;
    }
    .left-col .switch-area {
        display: none;
    }
</style>
<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";
    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
            $(".switch-btn, .switch-area").fadeOut(300);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
            $(".switch-btn, .switch-area").fadeIn(500);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
        $(".switch-btn, .switch-area").show();
    }
</script>




<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="分享到微信"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="分享到Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="分享到复制网址"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




     
      <!-- ������City�氲װ���� -->
<div id="lv-container" data-id="city" data-uid="MTAyMC8zNDgyOS8xMTM2Ng==">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> Ϊ����ʹ�����������۹����뼤��JavaScript</noscript>
</div>
<!-- City�氲װ��������� -->


      
    



    <div class="scroll" id="post-nav-button">
        
            <a  href="/2018/06/13/zabbix监控MSSQL/" title="上一篇: zabbix监控MSSQL">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a  href="/2018/05/10/多线程的一点思考/" title="下一篇: 多线程的一点思考">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/06/24/利用xlwt导出excel文件的例子/">利用xlwt导出excel文件的例子</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/24/python转义字符/">python转义字符</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/24/linux的五个查找命令/">linux的五个查找命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/24/时间同步/">时间同步</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/24/vim操作/">vim操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/24/三种方法解决FailedtostartLSB-Bringup-downnetworking问题/">三种方法解决FailedtostartLSB:Bringup/downnetworking问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/24/解决CentOS添加新网卡后找不到网卡配置文件/">解决CentOS添加新网卡后找不到网卡配置文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/21/fabric使用2-1-3版本/">fabric使用2.1.3版本</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/20/fabric应用/">fabric应用（1.14）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/19/zabbix监控ibm-x3550-m3服务器/">zabbix监控ibm-x3550-m3服务器</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/13/zabbix用户密码修改/">zabbix用户密码修改</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/13/zabbix监控MSSQL/">zabbix监控MSSQL</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/13/计算机编码/">计算机编码</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/10/多线程的一点思考/">多线程的一点思考</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/25/pandas操作excel/">pandas操作excel</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/02/连接linux远程登录无需密码/">连接linux远程登录无需密码</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/16/Pandas模块的学习/">Pandas模块的学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/15/Numpy模块的学习(3-5)/">Numpy模块的学习(3-5)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/14/Numpy模块的学习(1-2)/">Numpy模块的学习(1-2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/13/生成zabbix图片并通过微信发送/">生成zabbix图表，通过微信发送群聊</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/12/Matplotlib模块的学习/">Matplotlib模块的学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/10/zabbix自动发现无法获取主机/">zabbix自动发现无法获取主机</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/13/zabbix-proxy安装/">zabbix-proxy安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/10/dbfpy/">dbfpy模块的使用案例-python2.7</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/10/python环境迁移/">python环境迁移</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/常用anaconda命令大全/">常用anaconda命令大全</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/04/Centos操作系统常用log日志/">Centos操作系统常用log日志</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/04/查看shell/">查看shell</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/02/各种bin目录的区别/">各种bin目录的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/30/修改linux主机名/">修改linux主机名</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/28/mysql新安装之后密码处理/">mysql新安装之后密码处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/25/linux常用系统运维命令/">linux常用系统运维命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/24/Centos7常用命令大全/">Centos7常用命令大全</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/22/Centos7关闭防火墙/">Centos7关闭防火墙</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/20/centos中service命令与-etc-init-d的关系以及centos7的变化/">centos中service命令与/etc/init.d的关系以及centos7的变化</a></li></ul>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        // $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#toc, .switch-btn, .switch-area").toggle();
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
                $(".switch-btn, .switch-area").fadeToggle(300);
            }
        })
    </script>




    <script>
        
    </script>

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2018 JingWei Zhou
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo &nbsp;&nbsp;</a><a href="https://github.com/maochunguang" target="_blank">Blog</a> by tommy
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >极客到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 1;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>






<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(
            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>